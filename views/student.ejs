
<head>   
    <!-- external CSS link -->
    <link rel="stylesheet" href="/css/normalize.css">
	<link rel="stylesheet" href="/css/student.css"> 
    <link rel="stylesheet" href="/css/style.css">
    <meta name="viewport" content= "width=device-width, initial-scale=1.0">
</head>

<body>
<h1>Welcome to <%=student.cohort.cohortName %>. You are logged in as:</h1>
<h1> <%=student.username %> </h1>

<div>
    <section class="section1">
        <div class="statsContainer container">
            <h2>Your Stats</h3>
            <h3>Total vocabulary: <%=student.totalWords %> </h3>
            <%  const total = activities.filter(e => {
                const checkReviews = (element) => element._id.toString() === student._id.toString();
                if (e.reviewedBy.some(checkReviews)){
                    return true; 
                }
            }).length; %>
            <h3>Total number of Activities: <%=total %> </h3>
            <h3>Total of activity review sessions: <%=student.totalReviews %> </h3>
            <h3>Total total Challenging Words to review: <%=student.problemWords.length %> </h3>
        </div>
        <div class="reviewContainer"> 
            <form action="/student/reviewActivity" method="POST">
            
                <div class="container smallForm">
                    <label for="newActivity" class="secondaryLabel flex1">New Activities</label>
                    <select name="activity" id="activityName" required>
                    <%  const checkReviews = (element) => element._id.toString() === student._id.toString();
                        const notReviewed = activities.filter(e => {         
                            if(e.reviewedBy.some(checkReviews) === false){
                                return true;
                            }});
                        for (let i = 0; i < notReviewed.length; i++) {%>   
                    <option value="<%=notReviewed[i].description %>"><%= notReviewed[i].description %></option>
                    <% } %>
                    </select>
                    <button type="submit" id="selectActivity">Select</button>
                </div>
            </form>
            <form action="/student/reviewActivity" method="POST">
                <div class="container smallForm">
                    <label for="activity" class="secondaryLabel flex1">Previous activities</label>
                    <select name="activity" id="activityName" required>
                    <%  const reviewed = activities.filter(e => {         
                        if(e.reviewedBy.some(checkReviews)){
                            return true;
                        }});
                        for (let i = 0; i < reviewed.length; i++) {%>   
                        <option value="<%=reviewed[i].description %>"><%= reviewed[i].description %></option>
                    <% } %>
                    </select>
                    <button type="submit" id="selectActivity">Select</button>
                </div>    
                </form>
            <form action="/student/reviewCustomActivity" method="POST">
                <div class="container smallForm">
                    <label for="customAvtivities" class="secondaryLabel flex1">Custom Activities</label>
                    <select name="activity" id="activityName" required>
                        <option value="Challenging Words">Challenging Words</option>
                      <% for(let i=0; i < student.individualExercises.length; i++) {%>   
                        <option value="<%=student.individualExercises[i].description %>"><%= student.individualExercises[i].description %></option>
                    <% } %> 
                    </select>
                    <button type="submit" id="selectActivity">Select</button>
                </div>
            </form>
            <form action="/student/reviewByCategory" method="POST">
                <div class="container smallForm">
                    <label for="categoryToReview" class="secondaryLabel flex1">Category Review</label>
                    <select name="categoryToReview" id="categoryToReview" required>
                        <option value="All">Review All</option>
                    <% for(let i=0; i < categories.length; i++) {%>
                        <option value="<%=categories[i] %>"><%= categories[i] %></option>  
                    <% } %>
                    </select>
                    <button type="submit" id="selectByTopic">Select</button>
                </div>
            </form>
        </div>    
    </section>  
</div>
<div>
    <h2>Create/Edit Custom Activities</h2>
    <div class="customActivityContainer">
        <div class="selectedImagecontainer vocabContainer">
            <% for(let i=0; i < wordsSelected.length; i++) {
                console.log(wordsSelected[i].imageUrl)%> 
            <div class="vocabImage" id="A<%= 1 + i %>" style="background-image: url('<%= wordsSelected[i].imageUrl %>')">
                <audio src="<%= wordsSelected[i].audioTis %>" id="audioTis<%= 1 + i %>"></audio>  
            </div>  
            <% } %>
        </div>
            <h2>To Create a Custom activity, select your vocab words above then give the activity a name.</h2>
        <div class="moveRight">
            <input type="text" id="activity" name="description" placeholder="Name Your Activity"
            required>        
            <button type="button" id="newActivity"> Create New Activity</button>
        </div>
        <div>
            <label for="customActivities" class="primaryLabel flex1"> Select Custom Activitiy to Delete</label>
            <select name="customActivities" id="activityToDelete" required>
                <option value="No Activity Selected">No Activity Selected</option>
                <% for(let i=0; i < student.individualExercises.length; i++) {%>   
                    <option value="<%=student.individualExercises[i].description %>"><%= student.individualExercises[i].description %></option>
                <% } %> 
            </select>
            <button type="button" id="deleteCustomActivity">Delete Selected Activity</button>
        </div>
    </div>        
</div>
<div class="navButtons">
    <% if (student.adminLevel > 0){ %>
        <button onclick="window.location.href ='admin';" class="navButton">Class Admin</button>
   <% } %>
  <% if (student.adminLevel > 1){ %>
         <button onclick="window.location.href ='admin/schoolAdmin';" class="navButton">School Admin</button>
    <% } %>
    <button onclick="window.location.href ='/logout';" class="navButton">Logout</button> 
       
    

</div>
    
<script type="text/javascript" src="/js/student.js"></script>
</body>